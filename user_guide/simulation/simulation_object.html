

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Creating a simulation object &mdash; KQCircuits  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/logo.svg"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Simulation export settings" href="simulation_settings.html" />
    <link rel="prev" title="External simulation tools" href="../simulations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#klayout">KLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html#known-installation-issues">Known installation issues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../installation.html#installing-different-python-package-versions-to-klayout-manually">Installing different Python package versions to KLayout manually</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../salt.html">Getting started (Salt package)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#installing-kqcircuits-salt-package">Installing KQCircuits Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#first-look-around">First look around</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#setting-up-a-user-package-directory">Setting up a user package directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-element">Defining a custom element</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#defining-a-custom-chip">Defining a custom chip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#upgrading-or-removing-salt-package">Upgrading or Removing Salt Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../salt.html#release-notes">Release Notes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gui_features.html">GUI Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-hotkeys">Useful hotkeys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#introduction-to-elements">Introduction to Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#placing-elements">Placing Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-element-parameters">Modifying Element parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#modifying-waveguides">Modifying waveguides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#editing-waveguidecomposite-nodes">Editing WaveguideComposite Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#converting-elements-placed-in-gui-into-code">Converting elements placed in GUI into code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gui_features.html#useful-menu-commands">Useful Menu Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gui_workflow.html">Point-and-click workflow tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python_workflow.html">Python workflow tutorial</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#structure-of-element-code">Structure of Element code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#element-class"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#libraries">Libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#build">Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-an-element-class">Example of defining an <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#example-of-defining-a-chip-and-inserting-elements-into-it">Example of defining a Chip and inserting elements into it</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#defining-sampleholder-types">Defining sampleholder types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#refpoints">Refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#kqcircuit-s-layers">KQCircuitâ€™s Layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#faces">Faces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#layer-configuration-files">Layer configuration files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../python_workflow.html#adding-a-new-face">Adding a new face</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../python_workflow.html#opening-element-or-chip-from-an-ide">Opening <code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Chip</span></code> from an IDE</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../macro_workflow.html">Macro development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#running-the-first-example">Running the first example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#interacting-with-the-klayout-application">Interacting with the KLayout application</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#creating-a-new-panel">Creating a new panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#accessing-the-currently-active-panel">Accessing the currently active panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../macro_workflow.html#using-klayoutview">Using <code class="docutils literal notranslate"><span class="pre">KLayoutView</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#debugger">Debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#reloading-libraries">Reloading libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../macro_workflow.html#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mask_export.html">Mask export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mask_export.html#tutorial">Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#basic-mask-script-and-export">Basic mask script and export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#ground-grid">Ground grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#adding-and-modifying-chips">Adding and modifying chips</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#multi-face-masks">Multi-face masks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mask_export.html#composite-mask-maps">Composite mask maps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../simulations.html">External simulation tools</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Creating a simulation object</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#simulation-box">Simulation box</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ports">Ports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-simulation">Example simulation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simulation-scripts">Simulation scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-from-klayout-gui">Geometry from Klayout GUI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="simulation_settings.html">Simulation export settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="ansys_export.html">Ansys export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ansys_export.html#ansys-scripts">Ansys scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sonnet_export.html">Sonnet export</a></li>
<li class="toctree-l3"><a class="reference internal" href="gmsh_elmer_export.html">Gmsh/Elmer export</a></li>
<li class="toctree-l3"><a class="reference internal" href="export_and_run.html">Run and export in one line</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../file_system_and_utilities.html">General Structure and Miscellaneous Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#file-system-hierarchy">File system hierarchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../file_system_and_utilities.html#miscellaneous-utilities">Miscellaneous Utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../xsection.html">Creating cross section images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#klayout-gui-xsection-tool">KLayout GUI XSection tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#xsection-call-in-kqc-code">XSection call in KQC code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xsection.html#process-files-xs">Process files (.xs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../terminology.html">Terminology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer/setup.html">Developer Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#prerequisites">Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#sources">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#unlinking">Unlinking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#update">Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#secondary-install">Secondary install</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/setup.html#manual-installation">Manual installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#linux-or-macos">Linux or MacOS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../developer/setup.html#windows">Windows</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/standalone.html">KLayout Standalone Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../developer/standalone.html#pypi-installation">PyPI Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/standalone.html#jupyter-notebook-usage">Jupyter notebook usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/containers.html">Containers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#cli-usage">CLI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#docker-ci-usage">Docker CI usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/containers.html#singularity-usage">Singularity usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/architecture.html">Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#elements">Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pcell-parameters">PCell parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#libraries">Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developer/architecture.html#pya-resolver">pya resolver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/testing.html">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../developer/testing.html#unit-tests">Unit tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/coding_style.html">Coding Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer/documentation.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing.html">Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../contributing.html#versioning">Versioning</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/kqcircuits.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.chips.html">kqcircuits.chips</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_crossings.html">kqcircuits.chips.airbridge_crossings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.airbridge_dc_test.html">kqcircuits.chips.airbridge_dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.chip.html">kqcircuits.chips.chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.crossing_twoface.html">kqcircuits.chips.crossing_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.daisy_woven.html">kqcircuits.chips.daisy_woven</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.dc_test.html">kqcircuits.chips.dc_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo.html">kqcircuits.chips.demo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.demo_twoface.html">kqcircuits.chips.demo_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.empty.html">kqcircuits.chips.empty</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test.html">kqcircuits.chips.junction_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.junction_test2.html">kqcircuits.chips.junction_test2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.launchers.html">kqcircuits.chips.launchers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test.html">kqcircuits.chips.lithography_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.lithography_test_twoface.html">kqcircuits.chips.lithography_test_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor.html">kqcircuits.chips.quality_factor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.quality_factor_twoface.html">kqcircuits.chips.quality_factor_twoface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.sample_holder_test.html">kqcircuits.chips.sample_holder_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.shaping.html">kqcircuits.chips.shaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.simple.html">kqcircuits.chips.simple</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.single_xmons.html">kqcircuits.chips.single_xmons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.stripes.html">kqcircuits.chips.stripes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.tsv_test.html">kqcircuits.chips.tsv_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.xmons_direct_coupling.html">kqcircuits.chips.xmons_direct_coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.chips.html#module-kqcircuits.chips">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.elements.html">kqcircuits.elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html">kqcircuits.elements.airbridges</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge.html">kqcircuits.elements.airbridges.airbridge</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_multi_face.html">kqcircuits.elements.airbridges.airbridge_multi_face</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.airbridge_rectangular.html">kqcircuits.elements.airbridges.airbridge_rectangular</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.airbridges.html#module-kqcircuits.elements.airbridges">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html">kqcircuits.elements.flip_chip_connectors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_dc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf.html">kqcircuits.elements.flip_chip_connectors.flip_chip_connector_rf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.flip_chip_connectors.html#module-kqcircuits.elements.flip_chip_connectors">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html">kqcircuits.elements.fluxlines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline.html">kqcircuits.elements.fluxlines.fluxline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_standard.html">kqcircuits.elements.fluxlines.fluxline_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.fluxline_straight.html">kqcircuits.elements.fluxlines.fluxline_straight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.fluxlines.html#module-kqcircuits.elements.fluxlines">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html">kqcircuits.elements.markers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker.html">kqcircuits.elements.markers.marker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.marker_standard.html">kqcircuits.elements.markers.marker_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.mask_marker_fc.html">kqcircuits.elements.markers.mask_marker_fc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.markers.html#module-kqcircuits.elements.markers">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html">kqcircuits.elements.tsvs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv.html">kqcircuits.elements.tsvs.tsv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_ellipse.html">kqcircuits.elements.tsvs.tsv_ellipse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.tsv_standard.html">kqcircuits.elements.tsvs.tsv_standard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.elements.tsvs.html#module-kqcircuits.elements.tsvs">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.airbridge_connection.html">kqcircuits.elements.airbridge_connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.capacitive_x_coupler.html">kqcircuits.elements.capacitive_x_coupler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.chip_frame.html">kqcircuits.elements.chip_frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.circular_capacitor.html">kqcircuits.elements.circular_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.element.html">kqcircuits.elements.element</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_square.html">kqcircuits.elements.finger_capacitor_square</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.finger_capacitor_taper.html">kqcircuits.elements.finger_capacitor_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.hanger_resonator.html">kqcircuits.elements.hanger_resonator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher.html">kqcircuits.elements.launcher</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.launcher_dc.html">kqcircuits.elements.launcher_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.meander.html">kqcircuits.elements.meander</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.smooth_capacitor.html">kqcircuits.elements.smooth_capacitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.spiral_resonator_polygon.html">kqcircuits.elements.spiral_resonator_polygon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_composite.html">kqcircuits.elements.waveguide_composite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar.html">kqcircuits.elements.waveguide_coplanar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_curved.html">kqcircuits.elements.waveguide_coplanar_curved</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_splitter.html">kqcircuits.elements.waveguide_coplanar_splitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_straight.html">kqcircuits.elements.waveguide_coplanar_straight</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.waveguide_coplanar_taper.html">kqcircuits.elements.waveguide_coplanar_taper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.elements.html#module-kqcircuits.elements">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.junctions.html">kqcircuits.junctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.junction.html">kqcircuits.junctions.junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan.html">kqcircuits.junctions.manhattan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.manhattan_single_junction.html">kqcircuits.junctions.manhattan_single_junction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.no_squid.html">kqcircuits.junctions.no_squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.sim.html">kqcircuits.junctions.sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.squid.html">kqcircuits.junctions.squid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.junctions.html#module-kqcircuits.junctions">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_config.html">kqcircuits.layer_config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.default_layer_config.html">kqcircuits.layer_config.default_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.example_layer_config.html">kqcircuits.layer_config.example_layer_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.layer_config.html#module-kqcircuits.layer_config">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.masks.html">kqcircuits.masks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_export.html">kqcircuits.masks.mask_export</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_layout.html">kqcircuits.masks.mask_layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.mask_set.html">kqcircuits.masks.mask_set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.masks.html#module-kqcircuits.masks">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.qubits.html">kqcircuits.qubits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.concentric_transmon.html">kqcircuits.qubits.concentric_transmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads.html">kqcircuits.qubits.double_pads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.double_pads_splines.html">kqcircuits.qubits.double_pads_splines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.qubit.html">kqcircuits.qubits.qubit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.swissmon.html">kqcircuits.qubits.swissmon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.qubits.html#module-kqcircuits.qubits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.simulations.html">kqcircuits.simulations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html">kqcircuits.simulations.export</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.ansys.html">kqcircuits.simulations.export.ansys</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.elmer.html">kqcircuits.simulations.export.elmer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.sonnet.html">kqcircuits.simulations.export.sonnet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.xsection.html">kqcircuits.simulations.export.xsection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.export_and_run.html">kqcircuits.simulations.export.export_and_run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.simulation_export.html">kqcircuits.simulations.export.simulation_export</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.util.html">kqcircuits.simulations.export.util</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.simulations.export.html#module-kqcircuits.simulations.export">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.airbridges_sim.html">kqcircuits.simulations.airbridges_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.cross_section_simulation.html">kqcircuits.simulations.cross_section_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.empty_simulation.html">kqcircuits.simulations.empty_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.port.html">kqcircuits.simulations.port</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html">kqcircuits.simulations.simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html">kqcircuits.simulations.single_element_simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.single_xmons_full_chip_sim.html">kqcircuits.simulations.single_xmons_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.waveguides_sim.html">kqcircuits.simulations.waveguides_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_full_chip_sim.html">kqcircuits.simulations.xmons_direct_coupling_full_chip_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.xmons_direct_coupling_sim.html">kqcircuits.simulations.xmons_direct_coupling_sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.simulations.html#module-kqcircuits.simulations">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.test_structures.html">kqcircuits.test_structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple.html">kqcircuits.test_structures.junction_test_pads.junction_test_pads_simple</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/kqcircuits.test_structures.junction_test_pads.html#module-kqcircuits.test_structures.junction_test_pads">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.airbridge_dc.html">kqcircuits.test_structures.airbridge_dc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.cross_test.html">kqcircuits.test_structures.cross_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.stripes_test.html">kqcircuits.test_structures.stripes_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.test_structure.html">kqcircuits.test_structures.test_structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.tsv_test_pattern.html">kqcircuits.test_structures.tsv_test_pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.test_structures.html#module-kqcircuits.test_structures">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.util.html">kqcircuits.util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.area.html">kqcircuits.util.area</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.count_instances.html">kqcircuits.util.count_instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.coupler_lib.html">kqcircuits.util.coupler_lib</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.deep_delete.html">kqcircuits.util.deep_delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.dependencies.html">kqcircuits.util.dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.edit_node_plugin.html">kqcircuits.util.edit_node_plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.export_helper.html">kqcircuits.util.export_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_helper.html">kqcircuits.util.geometry_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.geometry_json_encoder.html">kqcircuits.util.geometry_json_encoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.groundgrid.html">kqcircuits.util.groundgrid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.gui_helper.html">kqcircuits.util.gui_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.import_helper.html">kqcircuits.util.import_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.label.html">kqcircuits.util.label</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.layout_to_code.html">kqcircuits.util.layout_to_code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.library_helper.html">kqcircuits.util.library_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.log_router.html">kqcircuits.util.log_router</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.merge.html">kqcircuits.util.merge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_extraction.html">kqcircuits.util.netlist_extraction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.netlist_graph.html">kqcircuits.util.netlist_graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.parameter_helper.html">kqcircuits.util.parameter_helper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.parameters.html">kqcircuits.util.parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.plugin_startup.html">kqcircuits.util.plugin_startup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.refpoints.html">kqcircuits.util.refpoints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.replace_squids.html">kqcircuits.util.replace_squids</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.symmetric_polygons.html">kqcircuits.util.symmetric_polygons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../api/kqcircuits.util.html#module-kqcircuits.util">Module contents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.defaults.html">kqcircuits.defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.klayout_view.html">kqcircuits.klayout_view</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.layer_cluster.html">kqcircuits.layer_cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.pya_resolver.html">kqcircuits.pya_resolver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/kqcircuits.html#module-kqcircuits">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../citing.html">Citing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trademarks.html">Trademarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">KQCircuits</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">User Guide</a> &raquo;</li>
        
          <li><a href="../simulations.html">External simulation tools</a> &raquo;</li>
        
      <li>Creating a simulation object</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/iqm-finland/KQCircuits/blob/main/docs/user_guide/simulation/simulation_object.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-simulation-object">
<h1>Creating a simulation object<a class="headerlink" href="#creating-a-simulation-object" title="Permalink to this headline">Â¶</a></h1>
<p>To export a simulation, the geometry to simulate must be defined in a simulation object, which is an instance of the
<a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> class. The <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> class works very similar to regular KQCircuits elements: the
simulation should implement a <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation.build" title="kqcircuits.simulations.simulation.Simulation.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a> method which generates the
geometry, typically by inserting other elements. See also the <a class="reference internal" href="../../api/kqcircuits.elements.element.html#kqcircuits.elements.element.Element.build" title="kqcircuits.elements.element.Element.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>
method of class <a class="reference internal" href="../../api/kqcircuits.elements.element.html#kqcircuits.elements.element.Element" title="kqcircuits.elements.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Often, a simulation is defined in code by implementing a subclass of <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a>. This allows arbitrary
geometry and port definitions. To save you the trouble of writing a <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> subclass for single
element simulations, you can use the
<a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html#kqcircuits.simulations.single_element_simulation.get_single_element_sim_class" title="kqcircuits.simulations.single_element_simulation.get_single_element_sim_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_single_element_sim_class()</span></code></a>
classbuilder method, provided that the element class to be simulated has the
<a class="reference internal" href="../../api/kqcircuits.elements.element.html#kqcircuits.elements.element.Element.get_sim_ports" title="kqcircuits.elements.element.Element.get_sim_ports"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sim_ports()</span></code></a> method implemented.
There are also macros and convenience methods to create simulations directly
from existing geometry. See Geometry from KLayout GUI below for more information on these.</p>
</div>
<p>The <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> class supports most of the same concepts as <a class="reference internal" href="../../api/kqcircuits.elements.element.html#kqcircuits.elements.element.Element" title="kqcircuits.elements.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>.
For example, <a class="reference internal" href="../python_workflow.html#python-workflow-refpoints"><span class="std std-ref">Refpoints</span></a> can be used to connect child elements together and
simulations can have <a class="reference internal" href="../python_workflow.html#python-workflow-parameters"><span class="std std-ref">Parameters</span></a> with the same syntax as in <a class="reference internal" href="../../api/kqcircuits.elements.element.html#kqcircuits.elements.element.Element" title="kqcircuits.elements.element.Element"><code class="xref py py-class docutils literal notranslate"><span class="pre">Element</span></code></a>. A simulation can
inherit parameters from regular elements with the <a class="reference internal" href="../../api/kqcircuits.util.parameters.html#kqcircuits.util.parameters.add_parameter" title="kqcircuits.util.parameters.add_parameter"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_parameter()</span></code></a> and <a class="reference internal" href="../../api/kqcircuits.util.parameters.html#kqcircuits.util.parameters.add_parameters_from" title="kqcircuits.util.parameters.add_parameters_from"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_parameters_from()</span></code></a>
decorators.</p>
<p>The parameter values can be set when creating an instance of the simulation, by passing keyword arguments to the
constructor. Parameters are often used to export parameter sweeps of a simulation, and there are helper functions
<a class="reference internal" href="../../api/kqcircuits.simulations.export.simulation_export.html#kqcircuits.simulations.export.simulation_export.sweep_simulation" title="kqcircuits.simulations.export.simulation_export.sweep_simulation"><code class="xref py py-func docutils literal notranslate"><span class="pre">sweep_simulation()</span></code></a> and <a class="reference internal" href="../../api/kqcircuits.simulations.export.simulation_export.html#kqcircuits.simulations.export.simulation_export.cross_sweep_simulation" title="kqcircuits.simulations.export.simulation_export.cross_sweep_simulation"><code class="xref py py-func docutils literal notranslate"><span class="pre">cross_sweep_simulation()</span></code></a> to generate sweeps. See <a class="reference internal" href="#simulation-scripts"><span class="std std-ref">Simulation scripts</span></a>
for examples on their usage.</p>
<div class="section" id="simulation-box">
<h2>Simulation box<a class="headerlink" href="#simulation-box" title="Permalink to this headline">Â¶</a></h2>
<p>The <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> also has some extra features that are important for creating simulations. First of all,
the simulation area is defined by the <code class="docutils literal notranslate"><span class="pre">box</span></code> parameter, which should be a <a class="reference external" href="https://www.klayout.de/doc-qt5/code/class_DBox.html"><code class="docutils literal notranslate"><span class="pre">pya.DBox</span></code></a>.</p>
<p>The simulation area should not be overly large; consider what is necessary for the purpose. Since <code class="docutils literal notranslate"><span class="pre">box</span></code> is a
parameter, it can be set during export.</p>
<img alt="../../_images/simulation_area.svg" src="../../_images/simulation_area.svg" /></div>
<div class="section" id="ports">
<h2>Ports<a class="headerlink" href="#ports" title="Permalink to this headline">Â¶</a></h2>
<p>Ports define the inputs and outputs of the simulation. Two types of ports are supported, <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.EdgePort" title="kqcircuits.simulations.port.EdgePort"><code class="xref py py-class docutils literal notranslate"><span class="pre">EdgePort</span></code></a> at the edge
of the simulation box and <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.InternalPort" title="kqcircuits.simulations.port.InternalPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalPort</span></code></a> for ports inside the geometry. Ports are defined in the <code class="docutils literal notranslate"><span class="pre">build</span></code>
method by adding instances of the corresponding port class to the pre-defined <code class="docutils literal notranslate"><span class="pre">Simulations.ports</span></code> list.</p>
<p>To create an internal port, two points <code class="docutils literal notranslate"><span class="pre">signal_location</span></code> and <code class="docutils literal notranslate"><span class="pre">ground_location</span></code> must be supplied as <code class="docutils literal notranslate"><span class="pre">pya.DPoint</span></code>.
These must be exactly on the midpoint of geometry edges in the simulation. The actual port will be drawn as a rectangle
touching these edges. For example, the following snippet creates an internal port across the junction of a single-island qubit,
where <code class="docutils literal notranslate"><span class="pre">refp</span></code> is a <a class="reference internal" href="../../api/kqcircuits.util.refpoints.html#kqcircuits.util.refpoints.Refpoints" title="kqcircuits.util.refpoints.Refpoints"><code class="xref py py-class docutils literal notranslate"><span class="pre">Refpoints</span></code></a> instance obtained when inserting the corresponding qubit cell.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">ports</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
    <span class="n">InternalPort</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">signal_location</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_squid_a&quot;</span><span class="p">],</span> <span class="n">ground_location</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_squid_b&quot;</span><span class="p">])</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.InternalPort" title="kqcircuits.simulations.port.InternalPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">InternalPort</span></code></a> is mapped to a <cite>Lumped Port</cite> in Ansys HFSS. In Q3D and Elmer capacitance simulations only
<code class="docutils literal notranslate"><span class="pre">signal_location</span></code> is used and <code class="docutils literal notranslate"><span class="pre">ground_location</span></code> can be omitted. For qubits with multiple islands, usually a
separate port is needed for each island.</p>
<p>Edge ports can be created similarly by adding <a class="reference internal" href="../../api/kqcircuits.simulations.port.html#kqcircuits.simulations.port.EdgePort" title="kqcircuits.simulations.port.EdgePort"><code class="xref py py-class docutils literal notranslate"><span class="pre">EdgePort</span></code></a> instances. Edge ports only
have a <code class="docutils literal notranslate"><span class="pre">signal_location</span></code>, and it must be on the edge of <code class="docutils literal notranslate"><span class="pre">Simulation.box</span></code>.</p>
<p>For ports that connect via waveguides, the convenience method
<a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation.produce_waveguide_to_port" title="kqcircuits.simulations.simulation.Simulation.produce_waveguide_to_port"><code class="xref py py-meth docutils literal notranslate"><span class="pre">produce_waveguide_to_port()</span></code></a> draws both the waveguide and adds
the required port. It supports both internal and edge ports, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a 100um long waveguide that ends in an internal port</span>
<span class="bp">self</span><span class="o">.</span><span class="n">produce_waveguide_to_port</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_2&quot;</span><span class="p">],</span> <span class="n">towards</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_2_corner&quot;</span><span class="p">],</span> <span class="n">port_nr</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                               <span class="n">use_internal_ports</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">waveguide_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Create a waveguide that bends and terminates as an edge port on the right side of Simulation.box</span>
<span class="bp">self</span><span class="o">.</span><span class="n">produce_waveguide_to_port</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_3&quot;</span><span class="p">],</span> <span class="n">towards</span><span class="o">=</span><span class="n">refp</span><span class="p">[</span><span class="s2">&quot;port_3_corner&quot;</span><span class="p">],</span> <span class="n">port_nr</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                               <span class="n">use_internal_ports</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="example-simulation">
<h2>Example simulation<a class="headerlink" href="#example-simulation" title="Permalink to this headline">Â¶</a></h2>
<p>Suppose we want to simulate a <a class="reference internal" href="../../api/kqcircuits.qubits.swissmon.html#kqcircuits.qubits.swissmon.Swissmon" title="kqcircuits.qubits.swissmon.Swissmon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Swissmon</span></code></a> qubit. The simplest way to do it is to use the class builder to build a single
element simulation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kqcircuits.qubits.swissmon</span> <span class="kn">import</span> <span class="n">Swissmon</span>
<span class="kn">from</span> <span class="nn">kqcircuits.simulations.single_element_simulation</span> <span class="kn">import</span> <span class="n">get_single_element_sim_class</span>

<span class="n">view</span> <span class="o">=</span> <span class="n">KLayoutView</span><span class="p">()</span>
<span class="n">sim_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span> <span class="c1"># Some Swissmon parameters</span>

<span class="n">sim_class</span> <span class="o">=</span> <span class="n">get_single_element_sim_class</span><span class="p">(</span><span class="n">Swissmon</span><span class="p">)</span> <span class="c1"># Builds a simulation class for Swissmon</span>
<span class="n">simulation</span> <span class="o">=</span> <span class="n">sim_class</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="o">**</span><span class="n">sim_parameters</span><span class="p">)</span>  <span class="c1"># Builds an instance of the simulation class</span>
</pre></div>
</div>
<p>Returned <code class="docutils literal notranslate"><span class="pre">sim_class</span></code> is a dynamically built subclass of <a class="reference internal" href="../../api/kqcircuits.simulations.simulation.html#kqcircuits.simulations.simulation.Simulation" title="kqcircuits.simulations.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a> that contains a cell of
the Swissmon qubit placed at the center of the simulation box.
<code class="docutils literal notranslate"><span class="pre">sim_class</span></code> can be instantiated with a parameters dict that sets the parameter values to the internal Swissmon PCell.</p>
<p>You can see that currently
the <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/kqcircuits/qubits/swissmon.py">Swissmon code</a>
defines one <a class="reference internal" href="../../api/kqcircuits.util.refpoints.html#kqcircuits.util.refpoints.RefpointToSimPort" title="kqcircuits.util.refpoints.RefpointToSimPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">RefpointToSimPort</span></code></a> object to return in the
<code class="docutils literal notranslate"><span class="pre">get_sim_ports</span></code> method. That is the <a class="reference internal" href="../../api/kqcircuits.util.refpoints.html#kqcircuits.util.refpoints.JunctionSimPort" title="kqcircuits.util.refpoints.JunctionSimPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">JunctionSimPort</span></code></a>,
which with default arguments places an internal port between refpoints <code class="docutils literal notranslate"><span class="pre">&quot;port_squid_a&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;port_squid_b&quot;</span></code>.</p>
<p>Suppose we want to also have waveguides connected to the Swissmon couplers in the simulation. We can do this
by simply having <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sim_ports()</span></code> return <a class="reference internal" href="../../api/kqcircuits.util.refpoints.html#kqcircuits.util.refpoints.WaveguideToSimPort" title="kqcircuits.util.refpoints.WaveguideToSimPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">WaveguideToSimPort</span></code></a> objects
that lead to refpoints <code class="docutils literal notranslate"><span class="pre">&quot;port_cplr0&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;port_cplr1&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;port_cplr2&quot;</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_sim_ports</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">simulation</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">JunctionSimPort</span><span class="p">(),</span> <span class="n">WaveguideToSimPort</span><span class="p">(</span><span class="s1">&#39;port_cplr0&#39;</span><span class="p">),</span>
            <span class="n">WaveguideToSimPort</span><span class="p">(</span><span class="s1">&#39;port_cplr1&#39;</span><span class="p">),</span> <span class="n">WaveguideToSimPort</span><span class="p">(</span><span class="s1">&#39;port_cplr2&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>If we then decide to not produce the waveguides for the next simulation, instead of reverting the change we just made
to <a class="reference internal" href="../../api/kqcircuits.qubits.swissmon.html#kqcircuits.qubits.swissmon.Swissmon" title="kqcircuits.qubits.swissmon.Swissmon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Swissmon</span></code></a> we can specify which refpoints should not generate ports in the simulation object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sim_class</span> <span class="o">=</span> <span class="n">get_single_element_sim_class</span><span class="p">(</span><span class="n">Swissmon</span><span class="p">,</span> <span class="n">ignore_ports</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;port_cplr0&#39;</span><span class="p">,</span> <span class="s1">&#39;port_cplr1&#39;</span><span class="p">,</span> <span class="s1">&#39;port_cplr2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>For more information on how to use the <a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html#kqcircuits.simulations.single_element_simulation.get_single_element_sim_class" title="kqcircuits.simulations.single_element_simulation.get_single_element_sim_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_single_element_sim_class()</span></code></a>
simulation class builder, please consult the API docs for the method
as well as the API docs for different implementations of the <a class="reference internal" href="../../api/kqcircuits.util.refpoints.html#kqcircuits.util.refpoints.RefpointToSimPort" title="kqcircuits.util.refpoints.RefpointToSimPort"><code class="xref py py-class docutils literal notranslate"><span class="pre">RefpointToSimPort</span></code></a>.</p>
<p>Instead of using the class builder we can also code the simulation class by hand. The following code snippet
implements essentially the same simulation class as was returned by the
<a class="reference internal" href="../../api/kqcircuits.simulations.single_element_simulation.html#kqcircuits.simulations.single_element_simulation.get_single_element_sim_class" title="kqcircuits.simulations.single_element_simulation.get_single_element_sim_class"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_single_element_sim_class()</span></code></a> class builder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kqcircuits.pya_resolver</span> <span class="kn">import</span> <span class="n">pya</span>
<span class="kn">from</span> <span class="nn">kqcircuits.qubits.swissmon</span> <span class="kn">import</span> <span class="n">Swissmon</span>
<span class="kn">from</span> <span class="nn">kqcircuits.simulations.port</span> <span class="kn">import</span> <span class="n">InternalPort</span>
<span class="kn">from</span> <span class="nn">kqcircuits.simulations.simulation</span> <span class="kn">import</span> <span class="n">Simulation</span>
<span class="kn">from</span> <span class="nn">kqcircuits.util.parameters</span> <span class="kn">import</span> <span class="n">add_parameters_from</span>


<span class="nd">@add_parameters_from</span><span class="p">(</span><span class="n">Swissmon</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">junction_type</span><span class="o">=</span><span class="s2">&quot;Sim&quot;</span><span class="p">,</span> <span class="n">fluxline_type</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">SwissmonSimulation</span><span class="p">(</span><span class="n">Simulation</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Place a Swissmon qubit in the center of the simulation</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">refpoints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert_cell</span><span class="p">(</span><span class="n">Swissmon</span><span class="p">,</span> <span class="n">trans</span><span class="o">=</span><span class="n">pya</span><span class="o">.</span><span class="n">DTrans</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">center</span><span class="p">()))</span>

        <span class="c1"># Add waveguide ports to the three couplers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">produce_waveguide_to_port</span><span class="p">(</span><span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr0&#39;</span><span class="p">],</span> <span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr0_corner&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">produce_waveguide_to_port</span><span class="p">(</span><span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr1&#39;</span><span class="p">],</span> <span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr1_corner&#39;</span><span class="p">],</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;top&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">produce_waveguide_to_port</span><span class="p">(</span><span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr2&#39;</span><span class="p">],</span> <span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;port_cplr2_corner&#39;</span><span class="p">],</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>

        <span class="c1"># Add junction port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ports</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">InternalPort</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;squid_port_squid_a&#39;</span><span class="p">],</span> <span class="n">refpoints</span><span class="p">[</span><span class="s1">&#39;squid_port_squid_b&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>This could be a better approach if further flexibility is required, for example, to place multiple elements
into the same simulation or to simulate full chips or portions of the chip.</p>
</div>
<div class="section" id="simulation-scripts">
<span id="id1"></span><h2>Simulation scripts<a class="headerlink" href="#simulation-scripts" title="Permalink to this headline">Â¶</a></h2>
<p>Once a simulation class is defined, instances of it can be created with desired parameter values, and the instances
can be exported as geometry or to one of the supported simulation tools. The following example script shows how to
generate some instances and sweep a parameter, and export the resulting geometry as an OAS file.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kqcircuits.klayout_view</span> <span class="kn">import</span> <span class="n">KLayoutView</span>
<span class="kn">from</span> <span class="nn">kqcircuits.qubits.swissmon</span> <span class="kn">import</span> <span class="n">Swissmon</span>
<span class="kn">from</span> <span class="nn">kqcircuits.simulations.single_element_simulation</span> <span class="kn">import</span> <span class="n">get_single_element_sim_class</span>
<span class="kn">from</span> <span class="nn">kqcircuits.simulations.export.simulation_export</span> <span class="kn">import</span> <span class="n">export_simulation_oas</span><span class="p">,</span> <span class="n">sweep_simulation</span>
<span class="kn">from</span> <span class="nn">kqcircuits.util.export_helper</span> <span class="kn">import</span> <span class="n">create_or_empty_tmp_directory</span>

<span class="n">view</span> <span class="o">=</span> <span class="n">KLayoutView</span><span class="p">()</span>

<span class="n">simulations</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Using the class builder to define the simulaiton class of Swissmon</span>
<span class="n">sim_class</span> <span class="o">=</span> <span class="n">get_single_element_sim_class</span><span class="p">(</span><span class="n">Swissmon</span><span class="p">)</span>

<span class="c1"># Generate the simulation with default parameters</span>
<span class="n">simulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sim_class</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">layout</span><span class="p">))</span>

<span class="c1"># Generate the simulation for some other parameter</span>
<span class="n">simulations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sim_class</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span> <span class="n">arm_length</span><span class="o">=</span><span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;arm_length_500&#39;</span><span class="p">))</span>

<span class="c1"># Make a 4-point sweep of gap width</span>
<span class="n">simulations</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">sweep_simulation</span><span class="p">(</span>
    <span class="n">view</span><span class="o">.</span><span class="n">layout</span><span class="p">,</span>
    <span class="n">sim_class</span><span class="p">,</span>
    <span class="n">sim_parameters</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;gap_sweep&#39;</span><span class="p">,</span>
        <span class="s1">&#39;arm_length&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="n">sweeps</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;gap_width&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">]],</span>
    <span class="p">}</span>
<span class="p">))</span>

<span class="c1"># Export the list of simulation instances as OAS file in the kqcircuits/tmp/swissmon_simulation_output folder</span>
<span class="n">dir_path</span> <span class="o">=</span> <span class="n">create_or_empty_tmp_directory</span><span class="p">(</span><span class="s2">&quot;swissmon_simulation_output&quot;</span><span class="p">)</span>
<span class="n">export_simulation_oas</span><span class="p">(</span><span class="n">simulations</span><span class="p">,</span> <span class="n">dir_path</span><span class="p">)</span>
</pre></div>
</div>
<p>This script can be run as a regular python script, or in the KLayout macro editor.
The output files will be written to a folder in the KQCircuits <code class="docutils literal notranslate"><span class="pre">tmp</span></code> folder.</p>
<p>The example above only exports an OAS file with the geometry. See the following sections for information on exporting
to different simulation tools.</p>
<p>More example scripts are available in <a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/simulations">klayout_package/python/scripts/simulations</a>.</p>
</div>
<div class="section" id="geometry-from-klayout-gui">
<h2>Geometry from Klayout GUI<a class="headerlink" href="#geometry-from-klayout-gui" title="Permalink to this headline">Â¶</a></h2>
<p>An alternative way to export simulations is by drawing the geometry (placing elements or drawing manually) in
KLayout, and running one of the following macros.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/export/export_ansys.lym">scripts/macros/export/export_ansys.lym</a></p></li>
<li><p><a class="reference external" href="https://github.com/iqm-finland/KQCircuits/blob/main/klayout_package/python/scripts/macros/export/export_sonnet.lym">scripts/macros/export/export_sonnet.lym</a></p></li>
</ul>
<p>Similarly, simulation instances can be created from an existing KLayout Cell <code class="docutils literal notranslate"><span class="pre">cell</span></code> in code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">simulation</span> <span class="o">=</span> <span class="n">Simulation</span><span class="o">.</span><span class="n">from_cell</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Dev&#39;</span><span class="p">,</span> <span class="n">margin</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
</pre></div>
</div>
<p>These methods export the geometry, but do not add any ports to the simulation. Hence, this is most useful if you want
to manually create ports or make other changes for example in Ansys.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="simulation_settings.html" class="btn btn-neutral float-right" title="Simulation export settings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../simulations.html" class="btn btn-neutral float-left" title="External simulation tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021-2023, IQM.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>